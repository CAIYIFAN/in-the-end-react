{"ast":null,"code":"var _jsxFileName = \"/Users/caiyifan/Desktop/demo/in-the-end-react/src/App.js\";\nimport React, { Component } from 'react';\nimport LongTake from \"./LongTake\";\n\nclass App extends Component {\n  init() {\n    this.longTake = new LongTake({\n      container: this.refs.end,\n      // DOM容器\n      resource: this.getResource(),\n      // 加载的资源\n      touchOptions: {\n        touch: '.home',\n        // 反馈触摸的dom\n        initialValue: 0,\n        // 起始位置\n        sensitivity: 0.5,\n        // 不必需,触摸区域的灵敏度，默认值为1，可以为负数\n        maxSpeed: 0.5 // 不必需，触摸反馈的最大速度限制\n\n      },\n      sprites: this.getSprites(),\n      // 精灵图\n      spritesAnimations: this.getSpritesAnimations(),\n      // 精灵动画\n      texts: this.getTexts(),\n      // 文本\n      textsAnimations: this.getTextsAnimations() // 文本动画\n      // bgSprites: this.getBgSprites(), // 背景图片\n\n    }); // this.longTake.on('loadProgress', (progress) => {\n    //   console.log(`加载进度: ${progress}`)\n    // })\n    // this.longTake.on('loadDone', () => {\n    //   console.log('加载完毕')\n    // })\n    // this.longTake.on('progress', (progress) => {\n    //   console.log(`当前进度: ${progress}`)\n    // })\n  } // 加载资源\n\n\n  getResource() {\n    // const host = location.host.match(/cdn.shikehuyu.com/ig) ? '.' : ''\n    const host = 'localhost';\n    const resource = {\n      sprites: []\n    }; // for (let i = 1; i <= 5; i += 1) {\n    //   resource.sprites.push({\n    //     name: `bg${i}`,\n    //     url: `${host}/static/imgs/bg/${i}.jpg`\n    //   })\n    // }\n\n    for (let i = 0; i < 50; i += 1) {\n      resource.sprites.push({\n        name: `ani${i}`,\n        url: `${host}/static/imgs/ani/${701 + i}.png`\n      });\n    }\n\n    for (let i = 0; i < 62; i += 1) {\n      resource.sprites.push({\n        name: `girl${i}`,\n        url: `${host}/static/imgs/girl/${160 + i}.png`\n      });\n    }\n\n    for (let i = 1; i < 8; i += 1) {\n      resource.sprites.push({\n        name: `item${i}`,\n        url: `${host}/static/imgs/items/${i}.png`\n      });\n    }\n\n    for (let i = 0; i < 25; i += 1) {\n      resource.sprites.push({\n        name: `plane${i}`,\n        url: `${host}/static/imgs/plane/${408 + i}.png`\n      });\n    }\n\n    return resource;\n  } // 背景\n\n\n  getBgSprites() {\n    const bgSprites = [];\n\n    for (let i = 1; i <= 5; i += 1) {\n      bgSprites.push(`bg${i}`);\n    }\n\n    return bgSprites;\n  } // 精灵\n\n\n  getSprites() {\n    const sprites = {\n      ani: {\n        key: 'ani0',\n        size: {\n          mode: 'widthFit',\n          width: 1\n        },\n        position: 'center',\n        anchor: 'center'\n      },\n      girl: {\n        key: 'girl0',\n        size: {\n          mode: 'widthFit',\n          width: 1\n        },\n        position: 'center',\n        anchor: 'center'\n      },\n      plane: {\n        key: 'plane0',\n        size: {\n          mode: 'widthFit',\n          width: 0.5\n        },\n        position: {\n          x: 0.5,\n          y: 0.4\n        },\n        anchor: 'center'\n      }\n    };\n\n    for (let i = 1; i < 8; i += 1) {\n      const x = i % 2 === 0 ? 1.1 : -0.1;\n      sprites[`item${i}`] = {\n        key: `item${i}`,\n        size: {\n          mode: 'widthFit',\n          width: 0.8\n        },\n        position: {\n          x,\n          y: 1.4\n        },\n        anchor: 'center'\n      };\n    }\n\n    return sprites;\n  } // 精灵动画\n\n\n  getSpritesAnimations() {\n    const animations = {\n      // 旋涡\n      ani: [{\n        delay: 0.1,\n        duration: 0.6,\n        from: {\n          alpha: 0\n        },\n        to: {\n          alpha: 1\n        }\n      }, {\n        delay: 0.1,\n        duration: 0.6,\n        frames: this.getFrames('ani', 50)\n      }, {\n        delay: 0.7,\n        duration: 0.2,\n        to: {\n          alpha: 0\n        }\n      }, {\n        delay: 0.7,\n        duration: 0.2,\n        frames: this.getFrames('ani', 50).reverse()\n      }],\n      // 女孩\n      girl: [{\n        delay: 0,\n        duration: 1,\n        frames: this.getFrames('girl', 62)\n      }, {\n        delay: 0,\n        duration: 0.2,\n        from: {\n          y: -window.innerHeight\n        },\n        to: {\n          y: window.innerHeight * 0.5\n        }\n      }, {\n        delay: 0.7,\n        duration: 0.3,\n        to: {\n          y: window.innerHeight * 1.2\n        }\n      }],\n      // 飞机\n      plane: [{\n        duration: 2,\n        frames: this.getFrames('plane', 25),\n        infinite: true,\n        frameRate: 25\n      }, {\n        delay: 0.8,\n        duration: 0.2,\n        from: {\n          width: 0,\n          height: 0,\n          alpha: 0\n        }\n      }]\n    }; // 物品\n\n    for (let i = 1; i < 8; i += 1) {\n      const delay = 0.25 + i / 7 * 0.2;\n      const x = i % 2 === 0 ? window.innerWidth * 0.65 : window.innerWidth * 0.35;\n      animations[`item${i}`] = [{\n        delay,\n        duration: 0.2,\n        to: {\n          x,\n          y: -window.innerHeight * 0.2,\n          width: 0,\n          height: 0\n        }\n      }, {\n        duration: 0.5 + Math.random(),\n        to: {\n          yoyo: true,\n          repeat: -1,\n          rotation: 0.1\n        }\n      }];\n    }\n\n    return animations;\n  } // 动画帧\n\n\n  getFrames(key, n, start = 0) {\n    const frames = [];\n\n    for (let i = start; i < n + start; i += 1) {\n      frames.push(`${key}${i}`);\n    }\n\n    return frames;\n  } // 文本\n\n\n  getTexts() {\n    const texts = {\n      guide: {\n        text: '向上滑动，找回童年',\n        position: {\n          x: 0.5,\n          y: 0.5\n        },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 18,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      },\n      ad: {\n        text: '《从零到一：实现通用一镜到底H5》',\n        link: 'https://segmentfault.com/a/1190000017848401',\n        position: {\n          x: 0.5,\n          y: 0.88\n        },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 12,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      },\n      ad2: {\n        text: 'Powerd by: Pixi.js AlloyTouch TweenMax',\n        position: {\n          x: 0.5,\n          y: 0.92\n        },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 12,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      },\n      ad3: {\n        text: 'Produced by VincentPat',\n        position: {\n          x: 0.5,\n          y: 0.58\n        },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 14,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      },\n      ad4: {\n        text: '素材源自互联网，仅供学习交流，请勿商用！',\n        position: {\n          x: 0.5,\n          y: 0.62\n        },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 12,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      }\n    };\n    return texts;\n  } // 文本动画\n\n\n  getTextsAnimations() {\n    const animations = {\n      guide: [{\n        delay: 0,\n        duration: 1,\n        from: {\n          y: window.innerHeight * 0.5\n        },\n        to: {\n          yoyo: true,\n          repeat: -1,\n          ease: 'easeOut',\n          y: window.innerHeight * 0.48\n        }\n      }, {\n        delay: 0,\n        duration: 0.1,\n        to: {\n          alpha: 0\n        }\n      }],\n      ad: [{\n        delay: 0,\n        duration: 0.1,\n        to: {\n          alpha: 0\n        }\n      }],\n      ad2: [{\n        delay: 0,\n        duration: 0.1,\n        to: {\n          alpha: 0\n        }\n      }],\n      ad3: [{\n        delay: 0.9,\n        duration: 0.1,\n        from: {\n          alpha: 0,\n          y: window.innerHeight * 0.53\n        }\n      }],\n      ad4: [{\n        delay: 0.9,\n        duration: 0.1,\n        from: {\n          alpha: 0,\n          y: window.innerHeight * 0.57\n        }\n      }]\n    };\n    return animations;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      ref: \"end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    });\n  }\n\n  componentDidMount() {\n    this.init();\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/caiyifan/Desktop/demo/in-the-end-react/src/App.js"],"names":["React","Component","LongTake","App","init","longTake","container","refs","end","resource","getResource","touchOptions","touch","initialValue","sensitivity","maxSpeed","sprites","getSprites","spritesAnimations","getSpritesAnimations","texts","getTexts","textsAnimations","getTextsAnimations","host","i","push","name","url","getBgSprites","bgSprites","ani","key","size","mode","width","position","anchor","girl","plane","x","y","animations","delay","duration","from","alpha","to","frames","getFrames","reverse","window","innerHeight","infinite","frameRate","height","innerWidth","Math","random","yoyo","repeat","rotation","n","start","guide","text","options","fontFamily","fontSize","fill","align","ad","link","ad2","ad3","ad4","ease","render","componentDidMount"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport LongTake from \"./LongTake\";\n\nclass App extends Component{\n  init () {\n    this.longTake = new LongTake({\n      container: this.refs.end, // DOM容器\n      resource: this.getResource(), // 加载的资源\n      touchOptions: {\n        touch: '.home', // 反馈触摸的dom\n        initialValue: 0, // 起始位置\n        sensitivity: 0.5, // 不必需,触摸区域的灵敏度，默认值为1，可以为负数\n        maxSpeed: 0.5 // 不必需，触摸反馈的最大速度限制\n      },\n      sprites: this.getSprites(), // 精灵图\n      spritesAnimations: this.getSpritesAnimations(), // 精灵动画\n      texts: this.getTexts(), // 文本\n      textsAnimations: this.getTextsAnimations() // 文本动画\n      // bgSprites: this.getBgSprites(), // 背景图片\n    })\n    // this.longTake.on('loadProgress', (progress) => {\n    //   console.log(`加载进度: ${progress}`)\n    // })\n    // this.longTake.on('loadDone', () => {\n    //   console.log('加载完毕')\n    // })\n    // this.longTake.on('progress', (progress) => {\n    //   console.log(`当前进度: ${progress}`)\n    // })\n  }\n\n  // 加载资源\n  getResource () {\n    // const host = location.host.match(/cdn.shikehuyu.com/ig) ? '.' : ''\n    const host = 'localhost'\n    const resource = { sprites: [] }\n    // for (let i = 1; i <= 5; i += 1) {\n    //   resource.sprites.push({\n    //     name: `bg${i}`,\n    //     url: `${host}/static/imgs/bg/${i}.jpg`\n    //   })\n    // }\n    for (let i = 0; i < 50; i += 1) {\n      resource.sprites.push({\n        name: `ani${i}`,\n        url: `${host}/static/imgs/ani/${701 + i}.png`\n      })\n    }\n    for (let i = 0; i < 62; i += 1) {\n      resource.sprites.push({\n        name: `girl${i}`,\n        url: `${host}/static/imgs/girl/${160 + i}.png`\n      })\n    }\n    for (let i = 1; i < 8; i += 1) {\n      resource.sprites.push({\n        name: `item${i}`,\n        url: `${host}/static/imgs/items/${i}.png`\n      })\n    }\n    for (let i = 0; i < 25; i += 1) {\n      resource.sprites.push({\n        name: `plane${i}`,\n        url: `${host}/static/imgs/plane/${408 + i}.png`\n      })\n    }\n    return resource\n  }\n\n  // 背景\n  getBgSprites () {\n    const bgSprites = []\n    for (let i = 1; i <= 5; i += 1) {\n      bgSprites.push(`bg${i}`)\n    }\n    return bgSprites\n  }\n\n  // 精灵\n  getSprites () {\n    const sprites = {\n      ani: {\n        key: 'ani0',\n        size: { mode: 'widthFit', width: 1 },\n        position: 'center',\n        anchor: 'center'\n      },\n      girl: {\n        key: 'girl0',\n        size: { mode: 'widthFit', width: 1 },\n        position: 'center',\n        anchor: 'center'\n      },\n      plane: {\n        key: 'plane0',\n        size: { mode: 'widthFit', width: 0.5 },\n        position: {\n          x: 0.5, y: 0.4\n        },\n        anchor: 'center'\n      }\n    }\n    for (let i = 1; i < 8; i += 1) {\n      const x = i % 2 === 0 ? 1.1 : -0.1\n      sprites[`item${i}`] = {\n        key: `item${i}`,\n        size: { mode: 'widthFit', width: 0.8 },\n        position: { x, y: 1.4 },\n        anchor: 'center'\n      }\n    }\n    return sprites\n  }\n\n  // 精灵动画\n  getSpritesAnimations () {\n    const animations = {\n      // 旋涡\n      ani: [{\n        delay: 0.1,\n        duration: 0.6,\n        from: { alpha: 0 },\n        to: { alpha: 1 }\n      }, {\n        delay: 0.1,\n        duration: 0.6,\n        frames: this.getFrames('ani', 50)\n      }, {\n        delay: 0.7,\n        duration: 0.2,\n        to: { alpha: 0 }\n      }, {\n        delay: 0.7,\n        duration: 0.2,\n        frames: this.getFrames('ani', 50).reverse()\n      }],\n      // 女孩\n      girl: [{\n        delay: 0,\n        duration: 1,\n        frames: this.getFrames('girl', 62)\n      }, {\n        delay: 0,\n        duration: 0.2,\n        from: { y: -window.innerHeight },\n        to: { y: window.innerHeight * 0.5 }\n      }, {\n        delay: 0.7,\n        duration: 0.3,\n        to: { y: window.innerHeight * 1.2 }\n      }],\n      // 飞机\n      plane: [{\n        duration: 2,\n        frames: this.getFrames('plane', 25),\n        infinite: true,\n        frameRate: 25\n      }, {\n        delay: 0.8,\n        duration: 0.2,\n        from: { width: 0, height: 0, alpha: 0 }\n      }]\n    }\n    // 物品\n    for (let i = 1; i < 8; i += 1) {\n      const delay = 0.25 + (i / 7 * 0.2)\n      const x = i % 2 === 0 ? window.innerWidth * 0.65 : window.innerWidth * 0.35\n      animations[`item${i}`] = [{\n        delay,\n        duration: 0.2,\n        to: { x, y: -window.innerHeight * 0.2, width: 0, height: 0 }\n      }, {\n        duration: 0.5 + Math.random(),\n        to: { yoyo: true, repeat: -1, rotation: 0.1 }\n      }]\n    }\n    return animations\n  }\n\n  // 动画帧\n  getFrames (key, n, start = 0) {\n    const frames = []\n    for (let i = start; i < n + start; i += 1) {\n      frames.push(`${key}${i}`)\n    }\n    return frames\n  }\n\n  // 文本\n  getTexts () {\n    const texts = {\n      guide: {\n        text: '向上滑动，找回童年',\n        position: { x: 0.5, y: 0.5 },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 18,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      },\n      ad: {\n        text: '《从零到一：实现通用一镜到底H5》',\n        link: 'https://segmentfault.com/a/1190000017848401',\n        position: { x: 0.5, y: 0.88 },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 12,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      },\n      ad2: {\n        text: 'Powerd by: Pixi.js AlloyTouch TweenMax',\n        position: { x: 0.5, y: 0.92 },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 12,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      },\n      ad3: {\n        text: 'Produced by VincentPat',\n        position: { x: 0.5, y: 0.58 },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 14,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      },\n      ad4: {\n        text: '素材源自互联网，仅供学习交流，请勿商用！',\n        position: { x: 0.5, y: 0.62 },\n        anchor: 'center',\n        options: {\n          fontFamily: 'Arial',\n          fontSize: window.innerWidth / 375 * 12,\n          fill: 0xfb833f,\n          align: 'center'\n        }\n      }\n    }\n    return texts\n  }\n\n  // 文本动画\n  getTextsAnimations () {\n    const animations = {\n      guide: [{\n        delay: 0,\n        duration: 1,\n        from: { y: window.innerHeight * 0.5 },\n        to: { yoyo: true, repeat: -1, ease: 'easeOut', y: window.innerHeight * 0.48 }\n      }, {\n        delay: 0,\n        duration: 0.1,\n        to: { alpha: 0 }\n      }],\n      ad: [{\n        delay: 0,\n        duration: 0.1,\n        to: { alpha: 0 }\n      }],\n      ad2: [{\n        delay: 0,\n        duration: 0.1,\n        to: { alpha: 0 }\n      }],\n      ad3: [{\n        delay: 0.9,\n        duration: 0.1,\n        from: { alpha: 0, y: window.innerHeight * 0.53 }\n      }],\n      ad4: [{\n        delay: 0.9,\n        duration: 0.1,\n        from: { alpha: 0, y: window.innerHeight * 0.57 }\n      }]\n    }\n    return animations\n  }\n  render(){\n    return(<div ref={\"end\"}/>);\n  }\n  componentDidMount() {\n    this.init();\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}